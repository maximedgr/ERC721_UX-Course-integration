{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MAXD0\\\\Desktop\\\\ESILV\\\\A4\\\\blockchain programming\\\\my_front\\\\src\\\\components\\\\pages\\\\Chain-info.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport Web3 from \"web3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChainInfo() {\n  _s();\n  //State definition  \n  const [account, setAccount] = useState(null);\n  const [chain, setChain] = useState(null);\n  const [block, setBlock] = useState(null);\n  const [web3, setWeb3] = useState(null);\n\n  // useEffect(() => {\n  //   checkAccount()\n  // }, [])\n\n  // invoke to connect to wallet account\n  async function activate() {\n    if (window.ethereum) {\n      try {\n        await window.ethereum.request({\n          method: 'eth_requestAccounts'\n        });\n        checkAccount();\n      } catch (err) {\n        console.log('user did not add account...', err);\n      }\n    }\n  }\n\n  // invoke to check if account is already connected\n  async function checkAccount() {\n    let web3 = new Web3(window.ethereum);\n    setWeb3(web3);\n    const accounts = await web3.eth.getAccounts();\n    setAccount(accounts[0]);\n  }\n  async function checkNetwork() {\n    let web3 = new Web3(window.ethereum);\n    const chainID = await web3.eth.getChainId();\n    setChain(chainID);\n  }\n  async function checkBlock() {\n    let web3 = new Web3(window.ethereum);\n    const block = await web3.eth.getBlockNumber();\n    setBlock(block);\n  }\n  async function switchNetwork() {\n    await window.ethereum.request({\n      method: 'wallet_switchEthereumChain',\n      params: [{\n        chainId: '0x5'\n      }] // Sepolia n'est pas natif pour la fonction de metamask\n    });\n  }\n\n  const info = async () => {\n    activate();\n    await checkNetwork();\n    checkBlock();\n    console.log(chain);\n    if (chain != 11155111) {\n      await switchNetwork();\n    }\n  };\n\n  //render\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: info,\n      children: \"Click here to get info\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Account address :\", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: [account, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 35\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Chain ID : \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: chain\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Latest block : \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: block\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 33\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n}\n_s(ChainInfo, \"euWS+KsXDcItPcJTx/SaJc+Mwws=\");\n_c = ChainInfo;\nexport default ChainInfo;\nvar _c;\n$RefreshReg$(_c, \"ChainInfo\");","map":{"version":3,"names":["useState","useEffect","Web3","ChainInfo","account","setAccount","chain","setChain","block","setBlock","web3","setWeb3","activate","window","ethereum","request","method","checkAccount","err","console","log","accounts","eth","getAccounts","checkNetwork","chainID","getChainId","checkBlock","getBlockNumber","switchNetwork","params","chainId","info"],"sources":["C:/Users/MAXD0/Desktop/ESILV/A4/blockchain programming/my_front/src/components/pages/Chain-info.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport Web3 from \"web3\";\n\nfunction ChainInfo(){\n\n//State definition  \nconst [account, setAccount] = useState(null);\nconst [chain, setChain] = useState(null); \nconst [block, setBlock] = useState(null);\nconst [web3, setWeb3] = useState(null);\n\n\n// useEffect(() => {\n//   checkAccount()\n// }, [])\n\n// invoke to connect to wallet account\nasync function activate() {\n  if (window.ethereum) {\n    try {\n      await window.ethereum.request({ method: 'eth_requestAccounts' });\n      checkAccount()\n    } catch (err) {\n      console.log('user did not add account...', err)\n    }\n  }\n}\n\n// invoke to check if account is already connected\nasync function checkAccount() {\n  let web3 = new Web3(window.ethereum)\n  setWeb3(web3)\n  const accounts = await web3.eth.getAccounts()\n  setAccount(accounts[0])\n}\n\nasync function checkNetwork(){\n  let web3 = new Web3(window.ethereum)\n  const chainID = await web3.eth.getChainId()\n  setChain(chainID)\n}\n\nasync function checkBlock(){\n  let web3 = new Web3(window.ethereum)\n  const block = await web3.eth.getBlockNumber()\n  setBlock(block)\n}\n\nasync function switchNetwork() {\n  await window.ethereum.request({\n  method: 'wallet_switchEthereumChain',\n  params: [{ chainId: '0x5' }],    // Sepolia n'est pas natif pour la fonction de metamask\n  });\n}\n  \nconst info = async()=>  { \n\n  activate();\n  await checkNetwork();\n  checkBlock();\n\n  console.log(chain)\n\n  if(chain!=11155111){\n    await switchNetwork();\n  }\n}\n\n //render\n    return (\n        <div>\n          <button onClick={info}>Click here to get info</button>\n            <div>Account address :<b>{account} </b> </div>\n            <br></br>\n            <div>Chain ID : <b>{chain}</b></div>\n            <br></br>\n            <div>Latest block : <b>{block}</b></div>\n        </div>\n    ); \n}\n\n\nexport default ChainInfo; \n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}