{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MAXD0\\\\Desktop\\\\ESILV\\\\A4\\\\blockchain programming\\\\my_front\\\\src\\\\components\\\\pages\\\\Chain-info.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport Web3 from \"web3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nasync function switchNetwork() {\n  await window.ethereum.request({\n    method: 'wallet_switchEthereumChain',\n    params: [{\n      chainId: '0x5'\n    }] // Sepolia n'est pas natif pour la fonction de metamask\n  });\n}\n\nconst [account, setAccount] = useState(null);\nlet [web3, setWeb3] = useState(null);\nuseEffect(() => {\n  checkAccount();\n}, []);\n\n// invoke to connect to wallet account\nasync function activate() {\n  if (window.ethereum) {\n    try {\n      await window.ethereum.request({\n        method: 'eth_requestAccounts'\n      });\n      checkAccount();\n    } catch (err) {\n      console.log('user did not add account...', err);\n    }\n  }\n}\n\n// invoke to check if account is already connected\nasync function checkAccount() {\n  let web3 = new Web3(window.ethereum);\n  setWeb3(web3);\n  const accounts = await web3.eth.getAccounts();\n  setAccount(accounts[0]);\n}\nasync function checkNetwork() {\n  let web3 = new Web3(window.ethereum);\n  const chainID = await web3.eth.getChainId();\n  setChainID(chainID);\n}\nfunction ChainInfo() {\n  _s();\n  //state zone\n  const [chain, setChain] = useState();\n  const [block, setblock] = useState();\n\n  //comportement zone\n  const info = async () => {\n    const web3 = new Web3(Web3.givenProvider || \"ws://localhost:8545\");\n    const {\n      ethereum\n    } = window;\n    const _account = ethereum.selectedAddress;\n    const chainId = await web3.eth.getChainId();\n    window.web3 = new Web3(window.ethereum);\n    let lastblock = await web3.eth.getBlockNumber();\n    setAccount(_account);\n    setChain(chainId);\n    setblock(lastblock);\n    if (chainId != \"11155111\") {\n      switchNetwork();\n    }\n  };\n\n  //render\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: info,\n      children: \"Click here to get info\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Account address :\", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: [account, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 35\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Chain ID : \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: chain\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Latest block : \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: block\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 33\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n}\n_s(ChainInfo, \"40om8I9/nbjdawqVUrTQkKYx60g=\");\n_c = ChainInfo;\nexport default ChainInfo;\nvar _c;\n$RefreshReg$(_c, \"ChainInfo\");","map":{"version":3,"names":["useState","useEffect","Web3","switchNetwork","window","ethereum","request","method","params","chainId","account","setAccount","web3","setWeb3","checkAccount","activate","err","console","log","accounts","eth","getAccounts","checkNetwork","chainID","getChainId","setChainID","ChainInfo","chain","setChain","block","setblock","info","givenProvider","_account","selectedAddress","lastblock","getBlockNumber"],"sources":["C:/Users/MAXD0/Desktop/ESILV/A4/blockchain programming/my_front/src/components/pages/Chain-info.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport Web3 from \"web3\";\n\nasync function switchNetwork() {\n  await window.ethereum.request({\n  method: 'wallet_switchEthereumChain',\n  params: [{ chainId: '0x5' }],    // Sepolia n'est pas natif pour la fonction de metamask\n  });\n}\n\nconst [account, setAccount] = useState(null)\nlet [web3, setWeb3] = useState(null)\nuseEffect(() => {\n  checkAccount()\n}, [])\n\n// invoke to connect to wallet account\nasync function activate() {\n  if (window.ethereum) {\n    try {\n      await window.ethereum.request({ method: 'eth_requestAccounts' });\n      checkAccount()\n    } catch (err) {\n      console.log('user did not add account...', err)\n    }\n  }\n}\n\n// invoke to check if account is already connected\nasync function checkAccount() {\n  let web3 = new Web3(window.ethereum)\n  setWeb3(web3)\n  const accounts = await web3.eth.getAccounts()\n  setAccount(accounts[0])\n}\n\nasync function checkNetwork(){\n  let web3 = new Web3(window.ethereum)\n  const chainID = await web3.eth.getChainId()\n  setChainID(chainID)\n}\n  \n\nfunction ChainInfo(){\n\n//state zone\nconst [chain, setChain] = useState(); \nconst [block, setblock] = useState();\n\n//comportement zone\nconst info = async()=>  {\n  const web3 = new Web3(Web3.givenProvider || \"ws://localhost:8545\");\n  const {ethereum} = window; \n  const _account = ethereum.selectedAddress; \n  const chainId =  await web3.eth.getChainId() ;\n  \n  window.web3 = new Web3(window.ethereum);\n  let lastblock = await web3.eth.getBlockNumber();\n\n  setAccount(_account); \n  setChain(chainId); \n  setblock(lastblock)\n\n  if(chainId!=\"11155111\"){\n    switchNetwork();\n  }\n  \n\n }\n\n //render\n    return (\n        <div>\n          <button onClick={info}>Click here to get info</button>\n            <div>Account address :<b>{account} </b> </div>\n            <br></br>\n            <div>Chain ID : <b>{chain}</b></div>\n            <br></br>\n            <div>Latest block : <b>{block}</b></div>\n\n            \n        </div>\n    ); \n}\n\n\nexport default ChainInfo; \n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}