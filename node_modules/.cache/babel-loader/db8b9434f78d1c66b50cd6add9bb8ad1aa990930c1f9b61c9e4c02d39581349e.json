{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MAXD0\\\\Desktop\\\\ESILV\\\\A4\\\\blockchain programming\\\\my_front\\\\src\\\\components\\\\pages\\\\FakeBayc.js\",\n  _s = $RefreshSig$();\nimport FakeBaycABI from \"../ABI/FakeBAYC.json\";\nimport { useState, useEffect } from 'react';\nimport Web3 from \"web3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction FakeBayc() {\n  _s();\n  //State definition  \n  const [account, setAccount] = useState(null);\n  const [chain, setChain] = useState(null);\n  const [block, setBlock] = useState(null);\n  const [web3, setWeb3] = useState(null);\n  const [fakeBAYCbalance, setFakeBAYCbalance] = useState(0);\n  const [fakeBAYCcontract, setfakeBAYCcontract] = useState(0);\n\n  // useEffect(() => {\n  //   checkAccount()\n  // }, [])\n\n  // invoke to connect to wallet account\n  async function activate() {\n    if (window.ethereum) {\n      try {\n        await window.ethereum.request({\n          method: 'eth_requestAccounts'\n        });\n        checkAccount();\n      } catch (err) {\n        console.log('user did not add account...', err);\n      }\n    }\n  }\n\n  // invoke to check if account is already connected\n  async function checkAccount() {\n    let web3 = new Web3(window.ethereum);\n    setWeb3(web3);\n    const accounts = await web3.eth.getAccounts();\n    setAccount(accounts[0]);\n  }\n  async function checkNetwork() {\n    let web3 = new Web3(window.ethereum);\n    const chainID = await web3.eth.getChainId();\n    if (chainID != \"11155111\") {\n      await switchNetwork();\n    } else {\n      setChain(chainID);\n    }\n  }\n  async function checkBlock() {\n    let web3 = new Web3(window.ethereum);\n    const block = await web3.eth.getBlockNumber();\n    setBlock(block);\n  }\n  async function switchNetwork() {\n    let web3 = new Web3(window.ethereum);\n    await window.ethereum.request({\n      method: 'wallet_switchEthereumChain',\n      params: [{\n        chainId: '0x5'\n      }] // Sepolia n'est pas natif pour la fonction de metamask\n    });\n\n    const chainID = await web3.eth.getChainId();\n    setChain(chainID);\n  }\n  async function getFakeBAYCinfo() {\n    const fakeBaycData = FakeBaycABI.networks[chain];\n    if (fakeBaycData) {\n      const fakeBaycABI = new web3.eth.Contract(FakeBaycABI.abi, fakeBaycData.address);\n      let fakeBAYCbalance = await fakeBaycABI.methods.tokenCounter().call();\n      this.setState({\n        fakeBAYCbalance: fakeBAYCbalance.toString()\n      });\n      console.log({\n        balance: fakeBAYCbalance\n      });\n    } else {\n      window.alert('Error : FakeBAYC contract not deployed / no detected network');\n    }\n  }\n\n  //render\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: account && chain && block && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: \"black\"\n        },\n        children: [\"FakeBayc number: \", this.state.fakeBAYCbalance]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this)\n    }, void 0, false)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n}\n_s(FakeBayc, \"k3S9tlmv0uJvUuLRQCtApiD9guk=\");\n_c = FakeBayc;\nexport default FakeBayc;\nvar _c;\n$RefreshReg$(_c, \"FakeBayc\");","map":{"version":3,"names":["FakeBaycABI","useState","useEffect","Web3","FakeBayc","account","setAccount","chain","setChain","block","setBlock","web3","setWeb3","fakeBAYCbalance","setFakeBAYCbalance","fakeBAYCcontract","setfakeBAYCcontract","activate","window","ethereum","request","method","checkAccount","err","console","log","accounts","eth","getAccounts","checkNetwork","chainID","getChainId","switchNetwork","checkBlock","getBlockNumber","params","chainId","getFakeBAYCinfo","fakeBaycData","networks","fakeBaycABI","Contract","abi","address","methods","tokenCounter","call","setState","toString","balance","alert","color","state"],"sources":["C:/Users/MAXD0/Desktop/ESILV/A4/blockchain programming/my_front/src/components/pages/FakeBayc.js"],"sourcesContent":["import FakeBaycABI from \"../ABI/FakeBAYC.json\"\nimport { useState, useEffect } from 'react'\nimport Web3 from \"web3\";\n\nfunction FakeBayc(){\n\n//State definition  \nconst [account, setAccount] = useState(null);\nconst [chain, setChain] = useState(null); \nconst [block, setBlock] = useState(null);\nconst [web3, setWeb3] = useState(null);\nconst [fakeBAYCbalance, setFakeBAYCbalance] = useState(0);\nconst [fakeBAYCcontract, setfakeBAYCcontract] = useState(0);\n\n\n\n// useEffect(() => {\n//   checkAccount()\n// }, [])\n\n// invoke to connect to wallet account\nasync function activate() {\n  if (window.ethereum) {\n    try {\n      await window.ethereum.request({ method: 'eth_requestAccounts' });\n      checkAccount()\n    } catch (err) {\n      console.log('user did not add account...', err)\n    }\n  }\n}\n\n// invoke to check if account is already connected\nasync function checkAccount() {\n  let web3 = new Web3(window.ethereum)\n  setWeb3(web3)\n  const accounts = await web3.eth.getAccounts()\n  setAccount(accounts[0])\n}\n\nasync function checkNetwork(){\n  let web3 = new Web3(window.ethereum)\n  const chainID = await web3.eth.getChainId()\n  if(chainID!=\"11155111\"){\n    await switchNetwork();\n  }\n  else{\n    setChain(chainID)\n  }\n}\n\nasync function checkBlock(){\n  let web3 = new Web3(window.ethereum)\n  const block = await web3.eth.getBlockNumber()\n  setBlock(block)\n}\n\nasync function switchNetwork() {\n  let web3 = new Web3(window.ethereum)\n  await window.ethereum.request({\n  method: 'wallet_switchEthereumChain',\n  params: [{ chainId: '0x5' }],    // Sepolia n'est pas natif pour la fonction de metamask\n  });\n  const chainID = await web3.eth.getChainId()\n  setChain(chainID)\n}\n\nasync function getFakeBAYCinfo(){\n    const fakeBaycData = FakeBaycABI.networks[chain]\n\n        if(fakeBaycData){\n            const fakeBaycABI = new web3.eth.Contract(FakeBaycABI.abi, fakeBaycData.address)\n            let fakeBAYCbalance = await fakeBaycABI.methods.tokenCounter().call()\n            this.setState({fakeBAYCbalance : fakeBAYCbalance.toString()})\n            console.log({balance: fakeBAYCbalance})\n        } else{\n            window.alert('Error : FakeBAYC contract not deployed / no detected network')\n        }\n}\n\n //render\n    return (\n        <div>\n        {account && chain && block && <>\n            <div style={{color:\"black\"}}>FakeBayc number: {this.state.fakeBAYCbalance}</div>\n        </>}\n          \n        </div>\n    ); \n}\n\n\nexport default FakeBayc; "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}