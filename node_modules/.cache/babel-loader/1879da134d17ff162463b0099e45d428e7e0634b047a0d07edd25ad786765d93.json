{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MAXD0\\\\Desktop\\\\ESILV\\\\A4\\\\blockchain programming\\\\my_front\\\\src\\\\components\\\\pages\\\\Chain-info.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport Web3 from \"web3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChainInfo() {\n  _s();\n  //state zone\n  const [account, setAccount] = useState();\n  const [chain, setChain] = useState();\n  const [block, setblock] = useState();\n  const [iscorrectNetwork, setNtwk] = useState();\n\n  //comportement zone\n  const info = async () => {\n    const {\n      ethereum\n    } = window;\n    const _account = ethereum.selectedAddress;\n    const chainId = ethereum.networkVersion;\n    const web3 = new Web3(Web3.givenProvider || \"ws://localhost:8545\");\n    window.web3 = new Web3(window.ethereum);\n    let lastblock = await web3.eth.getBlockNumber();\n    setAccount(_account);\n    setChain(chainId);\n    setblock(lastblock);\n    if (chainId != \"11155111\") {\n      console.log(\"Mauvais réseau\");\n      setNtwk(false);\n    } else {\n      setNtwk(true);\n    }\n  };\n\n  //render\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: info,\n      children: \"Click here to get info\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Account address :\", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: [account, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 35\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Chain ID : \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: chain\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Latest block : \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: block\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 33\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n}\n_s(ChainInfo, \"80ClUC+vzqpmEHYR0camvWi70H8=\");\n_c = ChainInfo;\nexport default ChainInfo;\nvar _c;\n$RefreshReg$(_c, \"ChainInfo\");","map":{"version":3,"names":["useState","Web3","ChainInfo","account","setAccount","chain","setChain","block","setblock","iscorrectNetwork","setNtwk","info","ethereum","window","_account","selectedAddress","chainId","networkVersion","web3","givenProvider","lastblock","eth","getBlockNumber","console","log"],"sources":["C:/Users/MAXD0/Desktop/ESILV/A4/blockchain programming/my_front/src/components/pages/Chain-info.js"],"sourcesContent":["import { useState } from \"react\";\nimport Web3 from \"web3\";\n\nfunction ChainInfo(){\n\n//state zone\nconst [account, setAccount] = useState(); \nconst [chain, setChain] = useState(); \nconst [block, setblock] = useState();\nconst [iscorrectNetwork,setNtwk] = useState();  \n\n//comportement zone\nconst info = async()=>  {\n\n  const {ethereum} = window; \n  const _account = ethereum.selectedAddress; \n  const chainId =  ethereum.networkVersion;  \n  const web3 = new Web3(Web3.givenProvider || \"ws://localhost:8545\");\n  window.web3 = new Web3(window.ethereum);\n  let lastblock = await web3.eth.getBlockNumber();\n\n  setAccount(_account); \n  setChain(chainId); \n  setblock(lastblock)\n  if(chainId != \"11155111\"){\n    console.log(\"Mauvais réseau\");\n    setNtwk(false)\n  }\n  else{\n    setNtwk(true);\n  }\n\n }\n\n //render\n    return (\n        <div>\n          <button onClick={info}>Click here to get info</button>\n            <div>Account address :<b>{account} </b> </div>\n            <br></br>\n            <div>Chain ID : <b>{chain}</b></div>\n            <br></br>\n            <div>Latest block : <b>{block}</b></div>\n\n            \n        </div>\n    ); \n}\n\n\nexport default ChainInfo; "],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,OAAOC,IAAI,MAAM,MAAM;AAAC;AAExB,SAASC,SAAS,GAAE;EAAA;EAEpB;EACA,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGJ,QAAQ,EAAE;EACxC,MAAM,CAACK,KAAK,EAAEC,QAAQ,CAAC,GAAGN,QAAQ,EAAE;EACpC,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGR,QAAQ,EAAE;EACpC,MAAM,CAACS,gBAAgB,EAACC,OAAO,CAAC,GAAGV,QAAQ,EAAE;;EAE7C;EACA,MAAMW,IAAI,GAAG,YAAW;IAEtB,MAAM;MAACC;IAAQ,CAAC,GAAGC,MAAM;IACzB,MAAMC,QAAQ,GAAGF,QAAQ,CAACG,eAAe;IACzC,MAAMC,OAAO,GAAIJ,QAAQ,CAACK,cAAc;IACxC,MAAMC,IAAI,GAAG,IAAIjB,IAAI,CAACA,IAAI,CAACkB,aAAa,IAAI,qBAAqB,CAAC;IAClEN,MAAM,CAACK,IAAI,GAAG,IAAIjB,IAAI,CAACY,MAAM,CAACD,QAAQ,CAAC;IACvC,IAAIQ,SAAS,GAAG,MAAMF,IAAI,CAACG,GAAG,CAACC,cAAc,EAAE;IAE/ClB,UAAU,CAACU,QAAQ,CAAC;IACpBR,QAAQ,CAACU,OAAO,CAAC;IACjBR,QAAQ,CAACY,SAAS,CAAC;IACnB,IAAGJ,OAAO,IAAI,UAAU,EAAC;MACvBO,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC7Bd,OAAO,CAAC,KAAK,CAAC;IAChB,CAAC,MACG;MACFA,OAAO,CAAC,IAAI,CAAC;IACf;EAED,CAAC;;EAED;EACG,oBACI;IAAA,wBACE;MAAQ,OAAO,EAAEC,IAAK;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAgC,eACpD;MAAA,6CAAsB;QAAA,WAAIR,OAAO;MAAA;QAAA;QAAA;QAAA;MAAA,QAAM;IAAA;MAAA;MAAA;MAAA;IAAA,QAAO,eAC9C;MAAA;MAAA;MAAA;IAAA,QAAS,eACT;MAAA,uCAAgB;QAAA,UAAIE;MAAK;QAAA;QAAA;QAAA;MAAA,QAAK;IAAA;MAAA;MAAA;MAAA;IAAA,QAAM,eACpC;MAAA;MAAA;MAAA;IAAA,QAAS,eACT;MAAA,2CAAoB;QAAA,UAAIE;MAAK;QAAA;QAAA;QAAA;MAAA,QAAK;IAAA;MAAA;MAAA;MAAA;IAAA,QAAM;EAAA;IAAA;IAAA;IAAA;EAAA,QAGtC;AAEd;AAAC,GA5CQL,SAAS;AAAA,KAATA,SAAS;AA+ClB,eAAeA,SAAS;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}